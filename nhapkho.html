{% extends 'base.html' %}
{% load static %}
{% load humanize %}


{% block title %}NH·∫¨P KHO{% endblock %}


{% block content %}
<div class="list-container">
 <div class="header-box">
     <h2 style="font-size: 1em; margin: 0; font-weight: 500; letter-spacing: 1px;color: white">NH·∫¨P KHO</h2>

 </div>
</div>


<style>
 body {
   font-family:  'Poppins', sans-serif;
   margin: 30px;
   background: #fff;
 }

 h2 {
   color: #f45a8d;
   margin-bottom: 20px;
 }


 .search-container {
   background-color: #fff;
   padding: 20px;
   border: 1px solid #ddd;
   border-radius: 10px;
   box-shadow: 0 2px 5px rgba(0,0,0,0.1);
   margin-bottom: 25px;
 }


 .row {
   display: flex;
   gap: 15px;
   align-items: center;
   margin-bottom: 15px;
   flex-wrap: wrap;
 }


 label {
   font-weight: 600;
   margin-right: 5px;
 }


 input, select {
   padding: 8px;
   border-radius: 5px;
   border: 1px solid #ddd;
   background-color: #f5f5f5;
 }


 button {
   background-color: #f45a8d;
   color: white;
   border: none;
   padding: 9px 18px;
   border-radius: 6px;
   font-weight: bold;
   cursor: pointer;
 }


 button:hover {
   background-color: #e04a7d;
 }


 table {
   /* ƒê√É S·ª¨A: Gi·∫£m chi·ªÅu r·ªông t·ªëi ƒëa v√† cƒÉn gi·ªØa */
   width: 1000px; /* Ho·∫∑c max-width: 900px */
   margin: 20px auto;

   border-collapse: collapse;
   border-radius: 0; /* KH√îNG BO G√ìC */
   overflow: hidden;
   box-shadow: 0 2px 5px rgba(0,0,0,0.1);
 }


 th, td {
   border: 1px solid #ddd;
   padding: 10px 12px;
   text-align: center;
}

 th {
   background-color: #f45a8d;
   color: white;
   font-weight: bold;
   text-transform: none; /* Th√™m d√≤ng n√†y */
 }


 tr:nth-child(even) {
   background-color: #f9f9f9;
 }


 .action-icons {
   display: flex;
   justify-content: center;
   gap: 10px;
 }


 .icon-btn {
   cursor: pointer;
   border: none;
   background: none;
   font-size: 18px;
 }


 .icon-btn.edit {
   color: #007bff;
 }


 .icon-btn.delete {
   color: #dc3545;
 }


 .create-btn-container {
   /* ƒê√É S·ª¨A: D√πng max-width v√† margin ƒë·ªÉ cƒÉn ch·ªânh theo kh·ªëi t√¨m ki·∫øm */
   max-width: 850px; /* B·∫±ng v·ªõi max-width c·ªßa .search-container */
   margin: 0 0 15px 250px; /* B·ªè auto v√† cƒÉn l·ªÅ tr√°i (margin-left: 0) */
   display: flex;
   justify-content: flex-end;
   margin-bottom: 15px;
 }


 .create-btn {
   display: inline-block;
   background: linear-gradient(135deg, #ff4da6, #ff85b3);
   color: #fff;
   text-decoration: none;
   padding: 10px 20px;
   border-radius: 25px;
   font-weight: bold;
   border: none;
   cursor: pointer;
   transition: 0.3s ease;
   box-shadow: 0 3px 8px rgba(255, 77, 166, 0.3);
 }


 .create-btn:hover {
   background: linear-gradient(135deg, #ff3385, #ff6fa1);
   transform: scale(1.05);
   box-shadow: 0 5px 12px rgba(255, 77, 166, 0.5);
 }


/* KH·ªêI BAO NGO√ÄI C·ª¶A T√åM KI·∫æM */
 .search-container {
   max-width: 850px; /* Chi·ªÅu r·ªông l·ªõn, cƒÉn gi·ªØa */
   margin-left: auto;
   margin-right: auto;
   padding: 20px;
   position: relative;
   border: 1px solid #ddd;
   border-radius: 10px;
   box-shadow: 0 2px 5px rgba(0,0,0,0.1);
   margin-bottom: 25px;
 }


 /* B·ªë c·ª•c Flexbox ch√≠nh cho c√°c h√†ng */
 .search-flex-row {
   display: flex;
   gap: 20px;
   align-items: flex-end; /* CƒÉn ch·ªânh c√°c item theo ƒë√°y */
   flex-wrap: wrap;
 }
 .search-flex-row.row-1 {
     margin-bottom: 15px; /* Kho·∫£ng c√°ch gi·ªØa H√†ng 1 v√† H√†ng 2 */
 }
 .search-flex-row.row-2 {
     margin-bottom: 0;
 }
/* M√£ phi·∫øu, Ngu·ªìn nh·∫≠p chi·∫øm 50% */
 .search-item.item-flex-50 {
     width: calc(50% - 10px);
     flex: 0 0 auto;
     min-width: 250px;
 }

 /* T·∫†O L·ªöP M·ªöI: T·ª´ ng√†y, ƒê·∫øn ng√†y chi·∫øm 40% */
 .search-item.item-flex-40 {
     width: calc(40% - 10px);
     flex: 0 0 auto;
     min-width: 150px;
 }

 /* ƒê·ªãnh d·∫°ng chung cho Label v√† Input */
 .search-item {
   display: flex;
   flex-direction: column;
 }
 .search-item label {
   font-weight: 600;
   margin-bottom: 5px;
   margin-right: 0;
 }
 .search-item input, .search-item select {
   width: 100%;
   padding: 8px;
   box-sizing: border-box;
   border-radius: 4px;
   background-color: #f5f5f5;
 }


/* --- N√öT T√åM KI·∫æM (ƒê∆∞a xu·ªëng h√†ng ri√™ng v√† cƒÉn ph·∫£i) --- */
 .search-btn {

   /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng */
   padding: 9px 18px;
   background-color: #f45a8d;
   color: white;
   border: none;
   border-radius: 6px;
   cursor: pointer;
   font-weight: bold;
 }

 /* Th√™m clearfix */
 .clearfix::after {
     content: "";
     display: table;
     clear: both;
 }


 /* --- M√ÄU H·ªíNG CHO ICON L·ªäCH --- */
 input[type="date"]::-webkit-calendar-picker-indicator {
   filter: invert(36%) sepia(85%) saturate(3029%) hue-rotate(320deg) brightness(101%) contrast(97%);
   cursor: pointer;
 }
</style>
<h2></h2>
<div class="search-container">
 <form method="get" action="{% url 'nhapkho' %}">
   <div class="search-flex-row row-1">
     <div class="search-item item-flex-50">
       <label>M√£ phi·∫øu</label>
       <input type="text" name="ma_phieu" placeholder="Nh·∫≠p m√£ phi·∫øu" value="{{ request.GET.ma_phieu }}">
     </div>
     <div class="search-item item-flex-50">
       <label>Ngu·ªìn nh·∫≠p</label>
       <input type="text" name="nguon_nhap" placeholder="Ngu·ªìn nh·∫≠p" value="{{ request.GET.nguon_nhap }}">
     </div>
   </div>

   <div class="search-flex-row row-2">
     <div class="search-item item-flex-40"> <label>T·ª´ ng√†y</label>
       <input type="date" name="tu_ngay" value="{{ request.GET.tu_ngay }}">
     </div>
     <div class="search-item item-flex-40"> <label>ƒê·∫øn ng√†y</label>
       <input type="date" name="den_ngay" value="{{ request.GET.den_ngay }}">
     </div>

     <button type="submit" class="search-btn">T√¨m ki·∫øm üîç</button>
   </div>

   </form>
</div>





<div class="create-btn-container">
 <a href="{% url 'tao_phieu_nhap' %}" class="create-btn">+ T·∫°o phi·∫øu nh·∫≠p kho</a>
</div>


<table>
 <thead>
   <tr>
     <th>STT</th>
     <th>M√£ phi·∫øu nh·∫≠p</th>
     <th>Ngu·ªìn nh·∫≠p</th>
     <th>T·ªïng ti·ªÅn</th>
     <th>Ng√†y nh·∫≠p</th>
     <th>Thao t√°c</th>
   </tr>
 </thead>
 <tbody>
   {% for phieu in danh_sach %}
     <tr>
       <td>{{ forloop.counter }}</td>
       <td>{{ phieu.ma_phieu }}</td>
       <td>{{ phieu.nguon_nhap }}</td>
       <td>{{ phieu.tong_tien_str }}</td>
       <td>{{ phieu.ngay_nhap|date:"d/m/Y H:i" }}</td>
       <td>
         <div class="action-icons">
           <a href="{% url 'chi_tiet_phieu_nhap' phieu.id %}" class="icon-btn edit" title="S·ª≠a">&#9998;</a>
           <a href="{% url 'xoa_phieu' phieu.id %}" class="icon-btn delete" title="X√≥a"
           onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√¥ng?')">&#128465;</a>
         </div>
       </td>
     </tr>
   {% empty %}
     <tr>
       <td colspan="6" style="text-align:center; color:#888;">(Ch∆∞a c√≥ d·ªØ li·ªáu)</td>
     </tr>
   {% endfor %}
 </tbody>
</table>
{% endblock %}

